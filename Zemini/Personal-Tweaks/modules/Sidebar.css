Credits: Arc 2.0 v3

/* Animations Smooth transition for all the sidebar */
.zen-essentials-container,
zen-workspace[active]:not([hidden]) {
    transition: height 0.3s cubic-bezier(0.175, 1.385, 0.62, 1), min-height 0.3s cubic-bezier(0.175, 1.385, 0.62, 1), max-height 0.3s cubic-bezier(0.175, 1.385, 0.62, 1), top 0.3s cubic-bezier(0.175, 1.385, 0.62, 1), margin 0.3s cubic-bezier(0.175, 1.385, 0.62, 1) !important;
    
}

#navigator-toolbox:not([zen-sidebar-expanded="true"]) {
  padding-bottom: calc(var(--zen-toolbox-padding) + 5px) !important;
}

#navigator-toolbox{
  border-top: transparent !important;
}

/* auto hide toolbar buttons */
#zen-sidebar-top-buttons {
  transition: all 0.3s ease-in-out !important;
  margin-top: 0 !important;
  padding-top: 5px !important;
}

#navigator-toolbox:not(:has(#nav-bar:hover)):not(:has(#urlbar[open=""])) {
  #zen-sidebar-top-buttons:not(:hover):not(:has([open="true"])):has(
      toolbarbutton:not([hidden="true"]):not(#unified-extensions-button)
    ) {
    margin-top: -20px !important;
    margin-bottom: 0 !important;
    opacity: 0 !important;
  }
}

/*Credit: JustAdumbPrsn*/
@-moz-document url-prefix("chrome:") {
  /* -------------------------- COLLAPSED FIX -------------------------- */
  
  :root:not([zen-sidebar-expanded="true"]) {
    #titlebar #TabsToolbar {
      padding-left: 2px !important;
      padding-right: 2px !important;
      transform: none !important;
      width: 60px !important;
   }
  
    #navigator-toolbox:not([zen-sidebar-expanded="true"]) {
      max-width: calc(var(--zen-toolbox-max-width) + 5px) !important;
      min-width: calc(var(--zen-toolbox-max-width) + 5px) !important;
      padding-bottom: var(--zen-toolbox-padding);
    
    & #titlebar {
        align-content: center !important;
        justify-content: center !important;
      }
    }
  }
    
  /* -------------------------- COMPACT SIDEBAR PSEUDO BACKGROUND -------------------------- */
  
  /* --- Base styling for all types --- */
  
  /* Sidebar container styling */
  body:has([zen-compact-mode="true"]) #titlebar {
    padding: 8px !important;
    border-radius: 11px !important;
    scale: 1 !important;
    background: light-dark(rgba(255, 255, 255, 0.4), rgba(0, 0, 0, 0.4)) !important;
    backdrop-filter: blur(32px) saturate(140%) !important;
  }
  
  /* Pseudo background overlay */
  body:has([zen-compact-mode="true"]) #browser::after {
    content: "" !important;
    position: absolute !important;
    z-index: -100000;
    border-radius: 11px !important;
    background-color: light-dark(rgba(200, 200, 200, 1), rgba(40, 40, 40, 1)) !important;
    opacity: 0 !important;
    transition: opacity 0.2s ease;
  }
  
  /* Right-side pseudo background alignment */
  :root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.65) !important;
  }
  /* Sidebar on right */
  :root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.9) !important;
  }
  
  /* Show pseudo background when active/hovered */
  body:has([zen-compact-mode="true"] [zen-user-show=""],
  [zen-compact-mode="true"] #navigator-toolbox[zen-has-hover="true"]) #browser::after {
    opacity: 1 !important;
  }
  :root[zen-right-side="true"] body:has([zen-compact-mode="true"] [zen-user-show=""],
  [zen-compact-mode="true"] #navigator-toolbox[zen-has-hover="true"]) #browser::after {
    opacity: 1 !important;
  }
  
  /* config to remove pseudo bg */
  @media (-moz-pref("nebula-compact-mode-no-sidebar-bg")) {
    body:has([zen-compact-mode="true"]) #browser::after {
      content: none !important; /* removes the pseudo element */
      background-color: transparent !important;
      backdrop-filter: none !important;
      opacity: 0 !important;
      pointer-events: none !important;
      transition: none !important;
    }
  }
  
  /* -------------------- SINGLE TOOLBAR -------------------- */
  
  @media (-moz-pref("zen.view.compact.hide-tabbar")) {
    html[zen-single-toolbar="true"] body:has([zen-compact-mode="true"]) #titlebar {
    top: calc(var(--zen-element-separation) / 0.99) !important;
    left: calc(var(--zen-element-separation) / 0.9) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2)) !important;
    }
  
    html[zen-single-toolbar="true"] body:has([zen-compact-mode="true"]) #browser::after {
    top: calc(var(--zen-element-separation) / 0.685) !important;
    left: calc(var(--zen-element-separation) / 0.65) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;
    }
  }
  
  @media (-moz-pref("zen.view.compact.hide-toolbar")) {
    html[zen-single-toolbar="true"] body:has([zen-compact-mode="true"]) #titlebar {
    top: calc(var(--zen-element-separation) / 0.99) !important;
    left: calc(var(--zen-element-separation) / 0.9) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2)) !important;
    }
  
    html[zen-single-toolbar="true"] body:has([zen-compact-mode="true"]) #browser::after {
    top: calc(var(--zen-element-separation) / 0.685) !important;
    left: calc(var(--zen-element-separation) / 0.65) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;
    }
  }
  
  @media (-moz-pref("zen.view.compact.hide-tabbar")) and (-moz-pref("zen.view.compact.hide-toolbar")) {
    html[zen-single-toolbar="true"] body:has([zen-compact-mode="true"]) #titlebar {
    top: calc(var(--zen-element-separation) / 0.99) !important;
    left: calc(var(--zen-element-separation) / 0.9) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2)) !important;
    }
  
    html[zen-single-toolbar="true"] body:has([zen-compact-mode="true"]) #browser::after {
    top: calc(var(--zen-element-separation) / 0.685) !important;
    left: calc(var(--zen-element-separation) / 0.65) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;
    }
  }
  
  /* -------------------- MULTI TOOLBAR -------------------- */
  
  @media (-moz-pref("zen.view.compact.hide-tabbar")) {
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #titlebar {
    top: calc(var(--zen-element-separation) / 0.99) !important;
    left: calc(var(--zen-element-separation) / 0.9) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 2)) !important;
    }
  
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #browser::after {
    top: calc(var(--zen-element-separation) / 0.19) !important;
    left: calc(var(--zen-element-separation) / 0.65) !important;
    width: calc(var(--nebula-sidebar-width)) !important;
    height: calc(100% - (var(--zen-element-separation) * 7)) !important;
    }
    
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.9) !important;
      }
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.65) !important;
      }
  }
  
  @media (-moz-pref("zen.view.compact.hide-toolbar")) {
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #titlebar {
      background: none !important;
      padding: 0 !important;
      border-radius: 0 !important;
      backdrop-filter: none !important;
    }
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: unset !important;
    }
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: unset !important;
    }
  }
  
  @media (-moz-pref("zen.view.compact.hide-tabbar")) and (-moz-pref("zen.view.compact.hide-toolbar")) {
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"])
    body:has([zen-compact-mode="true"]) #titlebar {
      top: calc(var(--zen-element-separation) / 0.99) !important;
      left: calc(var(--zen-element-separation) / 0.9) !important;
      width: calc(var(--nebula-sidebar-width)) !important;
      height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;
      /* Re-apply blur & visuals */
      background: light-dark(rgba(255, 255, 255, 0.4), rgba(0, 0, 0, 0.4)) !important;
      backdrop-filter: blur(32px) saturate(140%) !important;
      padding: 8px !important;
      border-radius: 11px !important;
      scale: 1 !important;
    }
  
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"])
    body:has([zen-compact-mode="true"]) #browser::after {
      top: calc(var(--zen-element-separation) / 0.685) !important;
      left: calc(var(--zen-element-separation) / 0.65) !important;
      width: calc(var(--nebula-sidebar-width)) !important;
      height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;
    }
    
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.9) !important;
     }
    html[zen-sidebar-expanded="true"]:not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.65) !important;
     }
  }
  
  /* -------------------- COLLAPSED TOOLBAR -------------------- */
  
  @media (-moz-pref("zen.view.compact.hide-tabbar")) {
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #titlebar {
    top: calc(var(--zen-element-separation) / 0.99) !important;
    left: calc(var(--zen-element-separation) / 0.9) !important;
    height: calc(100% - (var(--zen-element-separation) * 2)) !important;
    }
  
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #browser::after {
    top: calc(var(--zen-element-separation) / 0.19) !important;
    left: calc(var(--zen-element-separation) / 0.65) !important;
    width: 65px !important;
    height: calc(100% - (var(--zen-element-separation) * 6.8)) !important;
    }
    
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.9) !important;
    }
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 1.1) !important;
    }
  
  }
  
  @media (-moz-pref("zen.view.compact.hide-toolbar")) {
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #titlebar {
      background: none !important;
      padding: 0 !important;
      border-radius: 0 !important;
      backdrop-filter: none !important;
    }
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: unset !important;
    }
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: unset !important;
    }
  }
  
  @media (-moz-pref("zen.view.compact.hide-tabbar")) and (-moz-pref("zen.view.compact.hide-toolbar")) {
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #titlebar {
      top: calc(var(--zen-element-separation) / 0.99) !important;
      left: calc(var(--zen-element-separation) / 0.9) !important;
      width: calc(var(--nebula-sidebar-width)) !important;
      height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;
      /* Re-apply blur & visuals */
      background: light-dark(rgba(255, 255, 255, 0.4), rgba(0, 0, 0, 0.4)) !important;
      backdrop-filter: blur(32px) saturate(140%) !important;
      padding: 8px !important;
      border-radius: 11px !important;
      scale: 1 !important;
    }
  
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #browser::after {
    top: calc(var(--zen-element-separation) / 0.685) !important;
    left: calc(var(--zen-element-separation) / 0.65) !important;
    width: 65px !important;
    height: calc(100% - (var(--zen-element-separation) * 2.9)) !important;  
    }
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #titlebar {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 0.9) !important;
    }
    html:not([zen-sidebar-expanded="true"]):not([zen-single-toolbar="true"]):root[zen-right-side="true"] body:has([zen-compact-mode="true"]) #browser::after {
    left: auto !important;
    right: calc(var(--zen-element-separation) / 1.1) !important;
    }
  }
  
  /* ------------------------- GENERAL SIDEBAR -------------------------- */
  
  /* hide scrollbar */
  scrollbox {
    scrollbar-width: none !important;
  }
  
  /*
  #zen-tabs-wrapper {
      mask-image: linear-gradient(to bottom, black 90%, rgba(0, 0, 0, 0.4) 97%, transparent 100%) !important;
      -webkit-mask-image: linear-gradient(to bottom, black 90%, rgba(0, 0, 0, 0.7) 97%, transparent 100%) !important;
      scrollbar-width: none !important;
      -ms-overflow-style: none !important;
      overflow-y: auto !important;
      transition: mask-image 0.3s ease, -webkit-mask-image 0.3s ease;
  }
  */
  
  /* Hide the overflow background gradient */
  .workspace-arrowscrollbox[overflowing] {
      --zen-scrollbar-overflow-background: transparent !important;
      background: transparent !important;
  }
  
  /* Also remove any visual overlay pseudo-elements */
  .workspace-arrowscrollbox[overflowing]::before,
  .workspace-arrowscrollbox[overflowing]::after {
      content: none !important;
      display: none !important;
  }
  
  /* -------------------------- COMPACT TOPBAR --------------------------- */
  
  @media (-moz-pref("zen.view.compact.hide-toolbar")) {
  
    html:not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) {
      /* Disable backdrop-filter when urlbar is open */
      #browser:has(#urlbar[open]) #nav-bar {
        backdrop-filter: none !important;
      }
    }
  
    :root[zen-compact-mode="true"]:not([zen-single-toolbar="true"]) {
      #zen-appcontent-navbar-wrapper {
        & #zen-appcontent-navbar-container {
          display: flex !important;
          justify-content: center !important;
          height: fit-content !important;
          max-height: fit-content !important;
          background: transparent !important;
          box-shadow: none !important;
  
          & #nav-bar {
            position: relative !important;
            width: calc(100% - 28px) !important;
            margin: 14px !important;
            border-radius: 13px !important;
            background: light-dark(rgba(255, 255, 255, 0.4), rgba(0, 0, 0, 0.4)) !important;
            backdrop-filter: blur(32px) saturate(140%) !important;
            overflow: hidden;
          }
        }
      }
    }
  
    :root:not([zen-single-toolbar="true"]) body:has([zen-compact-mode="true"]) #browser::before {
      display: flex !important;
      position: absolute !important;
      z-index: 0 !important;
      content: "" !important;
      visibility: visible !important;
      opacity: 0;
      width: calc(100% - 27px) !important;
      height: 0px !important;
      bottom: auto !important;
      right: auto !important;
      margin-top: calc(var(--zen-element-separation) + 4px) !important;
      margin-left: calc(var(--zen-element-separation) + 3px) !important;
      margin-right: calc(var(--zen-element-separation) * 1.5) !important;
      border-radius: 13px !important;
      background-color: light-dark(rgba(200, 200, 200, 1), rgba(40, 40, 40, 1)) !important;
      transition: height 0.1s ease, opacity 0.5s ease, top 0s ease;
    }
  
    body:has([zen-compact-mode="true"] #zen-appcontent-navbar-wrapper[zen-has-hover="true"], [zen-compact-mode="true"] #zen-appcontent-navbar-wrapper[zen-user-show=""]) #browser::before {
      opacity: 1;
      top: 0% !important;
      height: 40px !important;
    }
  
    #browser {
      display: flex !important;
      justify-content: center !important;
    }
  }
  
  /* -------------------------- BOOKMARKS -------------------------- */
  
  /* Transparent Sidebar Items */
  .sidebar-panel {
      background: transparent !important;
      font-weight: 600 !important;
      opacity: 0.7 !important;
  }
  
  /* Clean & Transparent Sidebar Box */
  #sidebar-box {
      background-color: light-dark(rgba(255, 255, 255, 0.11), rgba(0, 0, 0, 0.2)) !important;
      border: none !important;
  }
  
  #sidebar-box #sidebar-header {
      border-bottom: none !important;
  }
  
  /* Transparent Sidebar Search Box & View Button */
  #sidebar-search-container > #search-box,
  #viewButton {
      padding: 4px 8px !important;
      appearance: none !important;
      background-color: transparent !important;
      border-radius: 10px !important;
      border: none !important;
  }
  
  #sidebar-search-container > #search-box:hover,
  #viewButton:hover,
  #sidebar-search-container > #search-box:active,
  #viewButton:active {
      background-color: rgba(255, 255, 255, 0.1) !important;
  }
}

:root {
  --nebula-border-radius: 13px; /* This will change roundness of everything in Nebula (DEFAULT: 13px) */
  --nebula-website-tint: light-dark(rgba(255,255,255,0),rgba(0,0,0,0)); /* Edit the color values to change the tint on transparent websites */
  --nebula-ui-tint: light-dark(rgba(255,255,255,0.2),rgba(0,0,0,0.2)); /* Edit the color values to change the tint of sidebar and etc. */
  --nebula-workspace-grayscale: 100%; /* Edit the % to make non active workspace icons more colored */
  --nebula-essentials-width: 60px !important; /* Edit the "60px" to something less to make width of essentials smaller */
  --nebula-sidebar-width: 25em !important; /* Edit the 20em to any other value you would like for compact sidebar when nebula-compact-mode-sidebar-bg is true */
      
  /* Tabs color */
  --nebula-color: light-dark(rgba(255, 255, 255, 0.25), rgba(0, 0, 0, 0.35)); /* default color */
  --nebula-color-hover: light-dark(rgba(255, 255, 255, 0.35), rgba(0, 0, 0, 0.45)); /* color when hovered */
  --nebula-color-selected: light-dark(rgba(255, 255, 255, 0.45), rgba(0, 0, 0, 0.55)); /* color when selected */
  }
   
  /* DO NOT ADD OTHER CSS BELOW */
  /* More styles and options will come soon here! */


